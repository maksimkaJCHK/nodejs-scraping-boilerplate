# nodejs-scraping-boilerplate

Шаблоны для скрапинга сайтов на node.js. Для того, чтобы всё работало нормально, нужен node.js больше 16 версии (из-за puppeteer, все остальное и на более ранних версиях должно работать). У меня на данный момент стоит версия 18.16.0.

Первоначально я занимался веб-скрапингом на python-е. Но там были проблемы с puppeteer. Поскольку я все таки больше занимаюсь frontend разработкой, мне javascript ближе. Однажды я нашел очень хорошую [статью](https://habr.com/ru/articles/301426/) по данной теме, конечно она старая, но некоторые вещи еще актуальны. Здесь я выложу простенькие примеры, для того, чтобы не писать код с нуля.

Доступно для запуска 2 команды:

* npm run parse. Данная команда показывает пример скрапинга простенького сайта. В качестве примера я буду скрапить статьи [российского экономиста Михаила Леонидовича Хазина](https://khazin.ru/articles/). Для скрапинга я использую следующие модули - tress, cheerio, needle, fs, cllc. Задержку между переходами я сделаю в одну секунду. В принципе хватит и 400-600 мс, но я ее сделаю побольше. Когда скрипт закончит выполняться, на выходе мы получим data.json с номером страницы, ссылкой на статью, заголовком статьи. Так же мы получим папку hazin_results со всеми статьями Михаила Леонидовича. Я думаю он на это не обидется. Все его статьи я сохраню исключительно в учебных целях, какую-то комерческую выгоду я из этого получить не планирую. Самая ранняя его статья датируется 2003 годом, заодно можно посмореть, сбылись ли его предсказания, пока я его в неточности уличить не смог)))
* npm run browser. Это пример более сложного скрапинга. В данном примере я использую библиотеку puppeteer для авторизации на сайте, и сбора информации после регистрации. Для  этого я рядом поднимаю локальный сервер, меня перекидывает на keycloak, я там ввожу имя и пароль, меня возвращает обратно, я собираю интересующие меня ссылки, и прохожу по ним, результаты я сохраняю в папку results. В принципе код тоам достаточно простой, я все достаточно хорошо комментировал, я думаю проблем возникнуть не должно.
